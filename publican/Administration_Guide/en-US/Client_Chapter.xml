<?xml version='1.0' encoding='UTF-8'?>
<!-- This document was created with Syntext Serna Free. --><!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "Administration_Guide.ent">
%BOOK_ENTITIES;
]>
<chapter id="desktop-chapter">
  <title>Desktop client</title>
  <para>The desktop client is a Java SE desktop application  to provide  user interface and/or execute the application logic on the end user&apos;s computer. The desktop client loads required application elements from the application server,  from the database or  directly from a disk, according to its configuration.  </para>
  <para>The desktop client supports automatic  updates via network.</para>
  <section id="desktop_run">
    <title>Running desktop client</title>
    <para>Startup scripts and Platypus client loader are located in the
    <filename>/run</filename> folder:</para>
    <itemizedlist>
      <listitem>
        <para><filename>platypus.exe</filename> — to run the client in Windows without creating the command prompt window with preliminary running the client update; this command ensures the correct functioning with UAC (User Account Control). </para>
      </listitem>
      <listitem>
        <para><filename>platypus.js</filename> — a script to run the client in Windows  without checking for updates.</para>
      </listitem>
      <listitem>
        <para><filename>platypus.sh</filename> — to run the client in Linux.</para>
      </listitem>
      <listitem>
        <para><filename>startupdate.sh</filename> — to run the client in Linux with preliminary running the client update.</para>
      </listitem>
    </itemizedlist>
    <para>If the desktop client is started successfully, it displays a dialog box for entering the user name and password and selecting a preconfigured connection to the server.</para>
    <para>You can create and use several preconfigured connections to the database or to an app server. Your distribution kit can include a default preconfigured connection.</para>
    <para>If the no-server configuration is used, enter the username and password of the database connection, and the username and password. </para>
    <para>If the  configuration with a server is used, enter only the username and password.</para>
    <para>Use the <guilabel>Remember database password</guilabel> and  <guilabel>Remember password</guilabel> check boxes, if it is necessary to remember the database password and/or Platypus applications password.</para>
    <para>Use the <guilabel>&gt;&gt;&gt;</guilabel> and <guilabel>&lt;&lt;&lt;</guilabel> buttons to display and hide the preconfigured connections panel.</para>
    <para>Select a preconfigured connection from the list to connect to the server and run the client.</para>
    <para>To display the dialog for creating a connection, click the <guibutton>New</guibutton> button on the preconfigured connections panel.</para>
    <para>To change a preconfigured connection, select it from the list and click the <guibutton>Change</guibutton> button on the preconfigured connections panel.</para>
    <para>Enter or modify the following fields in the <guilabel>Connection settings</guilabel> dialog:</para>
    <itemizedlist>
      <listitem>
        <para><guilabel>Name</guilabel> is the connection name, for example  <literal>myserver</literal>; you can enter any name in this field. </para>
      </listitem>
      <listitem>
        <para><guilabel>Connection URL</guilabel> is  the string of connection to the server. For working on the 2-tier scheme, the connection URL should be in the JDBC URL format, for example, <literal>jdbc:oracle:thin:@dbhost:1521:adb</literal>.</para>
        <para>For working on the 3-tier configuration over the Platypus Protocol, use URL of the <literal>platypus://<replaceable>host</replaceable><replaceable>:port</replaceable></literal> format, for example,  <literal>platypus://serverhost:8500</literal>,  port 8500 is the default port for the Platypus protocol and in this case it can be omitted.</para>
        <para>For working on the 3-tier confirguration over the HTTP protocol, use URL of the <literal>http://<replaceable>host</replaceable><replaceable>:port/platypus_servlet/application</replaceable></literal>  format, for example, <literal>http://localhost/myapp/application</literal>.</para>
      </listitem>
      <listitem>
        <para><guilabel>Scheme</guilabel> is  the default database scheme, for example, <literal>myschema</literal> (not used in case of the 3-tier configuration).</para>
      </listitem>
      <listitem>
        <para><guilabel>Database user</guilabel> is the default  database username, for example, <literal>user1</literal> (not used in case of the 3-tier configuration).</para>
      </listitem>
      <listitem>
        <para>To save the new connection settings, click <guibutton>OK</guibutton> in the dialog, to cancel, click  <guibutton>Cancel</guibutton>.</para>
      </listitem>
    </itemizedlist>
    <para>To remove a preconfigured connection, select the connection from the list and click the  <guibutton>Delete</guibutton> button on the preconfigured connections panel. The connection is deleted when the user clicks <guibutton>OK</guibutton>  in the removal confirmation dialog.</para>
    <para>To run the client using the selected connection, click <guibutton>OK</guibutton>. To close the connection selection dialog, click <guibutton>Cancel</guibutton>. </para>
  </section>
  <section id="desktop_command">
    <title>Command line options</title>
    <para>To configure starting of the desktop client, edit the contents of the launch script files. </para>
    <para>The deskop client is a Java SE Swing application. To customize it, specify the startup JVM options and the applications parameters. </para>
    <para>The command for running the Platypus client is as follows:</para>
    <programlisting>java <replaceable>JVM_OPTIONS</replaceable> -cp Application.jar;<replaceable>EXT_CLASSPATH</replaceable>com.eas.client.application.PlatypusClientApplication <replaceable>OPTIONS</replaceable></programlisting>
    <para>where <replaceable>JVM_OPTIONS</replaceable> is Java Virtual Machine options, <replaceable>EXT_CLASSPATH</replaceable> are paths which should be added to the Java class loader search path,  <replaceable>OPTIONS</replaceable> are additional running parameters.</para>
    <para>To specify the look and feel (L&amp;F) in command line use  the -D flag to set the <property>swing.defaultlaf</property> property, for example, to acitvate the Nimbus L&amp;F add the following in the <replaceable>JVM_OPTIONS</replaceable>: <literal>-Dswing.defaultlaf=com.sun.java.swing.plaf.nimbus.NimbusLookAndFeel</literal>.</para>
    <para>For the information how to specify the application&apos;s current log level refer to Java documentation. </para>
    <table>
      <title> Command line parameters</title>
      <tgroup cols="2">
        <tbody>
          <row>
            <entry>Parameter</entry>
            <entry>Description</entry>
          </row>
          <row>
            <entry>
              <parameter>-url URL</parameter>
            </entry>
            <entry>URL to the applicaion. Can be one of the follow: <literal>file://<replaceable>path</replaceable></literal> to specify to a directory or <literal>jndi://<replaceable>datasource</replaceable></literal> to specify to a datasource. </entry>
          </row>
          <row>
            <entry>
              <parameter>-appElement APP_ELEMENT</parameter>
            </entry>
            <entry>Module or form element&apos;s name to run.</entry>
          </row>
          <row>
            <entry>
              <parameter>-user USER_NAME</parameter>
            </entry>
            <entry>Username for logging to the application.</entry>
          </row>
          <row>
            <entry>
              <parameter>-password PASSWORD</parameter>
            </entry>
            <entry>User password for logging to the application.</entry>
          </row>
          <row>
            <entry>
              <parameter>-default-datasource DEFAULT_DS</parameter>
            </entry>
            <entry>Name of the application&apos;s default datasource.</entry>
          </row>
          <row>
            <entry>
              <parameter>-datasource DS</parameter>
            </entry>
            <entry>Datasource name.</entry>
          </row>
          <row>
            <entry>
              <parameter>-dburl DB_URL</parameter>
            </entry>
            <entry>JDBC URL database connection.</entry>
          </row>
          <row>
            <entry>
              <parameter>-dbuser DB_USER</parameter>
            </entry>
            <entry>Username for authorization in the database.</entry>
          </row>
          <row>
            <entry>
              <parameter>-dbpassword DB_PASSWORD</parameter>
            </entry>
            <entry>Password for authorization in the database.</entry>
          </row>
          <row>
            <entry>
              <parameter>-dbschema DB_SCHEMA</parameter>
            </entry>
            <entry>Database scheme (optional).</entry>
          </row>
        </tbody>
      </tgroup>
    </table>
    <para>Define zero or more datasources for a single application. A datasource is represented in a group of the following parameters: <parameter>-datasource</parameter>, <parameter>-dburl</parameter>, <parameter>-dbuser,</parameter> <parameter>-dbpassword</parameter> and optional <parameter>-dbschema</parameter> provided jointly. One of the datasource can be specified as a default using the <parameter>-default-datasource</parameter> parameter.</para>
    <para>If  database connection parameters or some credential are not specified, the <guilabel>Connection settings</guilabel> dialog  appears.</para>
    <para>To specify the look and feel (L&amp;F) in command line use  the -D flag to set the <property>swing.defaultlaf</property> property, for example: -Dswing.defaultlaf=com.sun.java.swing.plaf.nimbus.NimbusLookAndFeel</para>
    <para>The example of desktop client running command:</para>
    <programlisting>java -Dswing.defaultlaf=com.sun.java.swing.plaf.nimbus.NimbusLookAndFeel -cp Application.jar com.eas.client.application.PlatypusClientApplication -appElement mainForm -url file://~/testApp -default-datasource ds -datasource ds dburl jdbc:h2:tcp://localhost:9092/testDb -dbuser sa -dbpassword sa</programlisting>
  </section>
</chapter>
