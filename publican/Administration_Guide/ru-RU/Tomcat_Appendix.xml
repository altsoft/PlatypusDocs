<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE appendix PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "Administration_Guide.ent">
%BOOK_ENTITIES;
]>
<appendix id="appe-Administration_Guide-Tomcat_Appendix">
  <title>Настройка Apache Tomcat 7</title>
  <note>
    <para>Для получения подробной информации по настройке <application>Apache Tomcat 7</application> обратитесь к его документации.</para>
  </note>
  <para>Настройка источника данных:</para>
  <itemizedlist>
    <listitem>
      <para>cкопируйте соответствующий JAR-файл JDBC драйвера в каталог доступный загрузчику классов: <filename><replaceable>CATALINA_HOME</replaceable>/lib</filename>, где <replaceable>CATALINA_HOME</replaceable> - каталог в который был установлен <application>Apache Tomcat</application>;  </para>
    </listitem>
    <listitem>
      <para>cоздайте  JNDI ресурс источника данных JDBC; отредактируйте файл <filename>META-INF/context.xml</filename> web-приложения, добавив ресурс источника данных:</para>
      <programlisting>...
&lt;Resource name=&quot;jdbc/main&quot; auth=&quot;Container&quot; type=&quot;javax.sql.DataSource&quot;
       maxActive=&quot;100&quot; maxIdle=&quot;30&quot; maxWait=&quot;10000&quot;
       username=&quot;sa&quot; password=&quot;te$tPwd&quot; driverClassName=&quot;org.h2.Driver&quot;     url=&quot;jdbc:h2:tcp://localhost/~/h2db/test;schema=test&quot;/&gt;
...</programlisting>
      <para>при необходимости настройте пул соединений, задав параметры удаления и очистки неиспользуемых соединений.</para>
    </listitem>
    <listitem>
      <para>настройте область безопасности; отредактируйте файл <filename>META-INF/context.xml</filename> web-приложения, добавив область безопасности; пример, приведенный ниже настраивает область безопасности для работы со встроенным хранилищем информации о пользователях:</para>
      <programlisting>...
&lt;Realm  className=&quot;org.apache.catalina.realm.DataSourceRealm&quot;
   dataSourceName=&quot;jdbc/TestDB&quot;
   userTable=&quot;MTD_USERS&quot; userNameCol=&quot;USR_NAME&quot;   userCredCol=&quot;USR_PASSWD&quot;
   userRoleTable=&quot;MTD_GROUPS&quot; roleNameCol=&quot;GROUP_NAME&quot; digest=&quot;MD5&quot;/&gt;
...</programlisting>
      <para>Для области безопасности DataSourceRealm задайте названия таблиц, столбцов и алгоритма хэширования для работы с таблицами <literal>MTD_USERS</literal> и <literal>MTD_GROUPS</literal>.</para>
      <para>Для использвания другого хранилища данных аутентификации, например, внешнего LDAP-сервера настройте соответствующий тип области безопасности.</para>
    </listitem>
  </itemizedlist>
</appendix>
