<?xml version='1.0' encoding='utf-8' ?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "Administration_Guide.ent">
%BOOK_ENTITIES;
]>
<chapter id="chap-Administration_Guide-Security_Chapter" lang="ru-RU">
	<!--  This document was created with Syntext Serna Free.  --> <title>Безопасность в Platypus</title>
	 <para>
		Платформа Platypus имеет развитые механизмы обеспечения безопасности и обеспечивает ограничение доступа к ресурсам в системе на основе ролей назначенных пользователям и их группам. Могут вводится ограничения доступа к следующим ресурсам:
	</para>
	 <itemizedlist>
		<listitem>
			<para>
				программный модуль любого уровня - на сервере или клиенте;
			</para>

		</listitem>
		 <listitem>
			<para>
				функция в программном модуле;
			</para>

		</listitem>
		 <listitem>
			<para>
				форма;
			</para>

		</listitem>
		 <listitem>
			<para>
				запрос к базе данных;
			</para>

		</listitem>
		 <listitem>
			<para>
				отчет;
			</para>

		</listitem>
		 <listitem>
			<para>
				статический ресурс;
			</para>

		</listitem>

	</itemizedlist>
	 <para>
		Разграничения на доступ к ресурсам осуществляются на базе ролей. Роли вводятся на уровне приложения Platypus и являются его частью.
	</para>
	 <para>
		Для элемента приложения типа <emphasis>Запрос к базе данных</emphasis> могут определяться правила доступа для роли: полный доступ, только чтение (выполнение запросов <literal>SELECT</literal>), запись (выполнение команд <literal>INSERT</literal>, <literal>DELETE</literal> и <literal>UPDATE</literal>).
	</para>
	 <para>
		Помимо разграничения доступа на элементы приложения могут быть заданы ограничения на доступ с использованием встроенных средств сервлет-контейнера или J2EE сервера - при этом будет защищен URL доступа к приложению целиком.
	</para>
	 <para>
		С точки зрения аутентификации, Platypus может использовать "область безопасности". Область безопасности может быть встроенной или внешней и содержать информацию о пользователях и об их принадлежности к группам. Platypus поддерживает следующие варианты области безопасности:
	</para>
	 <itemizedlist>
		<listitem>
			<para>
				встроенная "база данных" пользователей, размещаемая в 2х таблицах БД - может использоваться при работе как по 2-х так и 3-х звенной схеме;
			</para>

		</listitem>
		 <listitem>
			<para>
				внешние хранилища аутентификационных данных, например, сервер LDAP (Active Directory, OpenLDAP и т.д.), данный режим может использоваться только при работе по 3-х звенной схеме в сервлет-контейнере или J2EE сервере.
			</para>

		</listitem>

	</itemizedlist>
	 <para>
		В области безопасности для пользователя определяется набор "групп" или "глобальных ролей" которым могут быть поставлены в соответствие роли на уровне приложения.
	</para>
	 <section id="sect-Administration_Guide-Security_Chapter-Test_Section_2">
		<title>Настройка прав доступа пользователей при использовании встроенного хранилища информации о пользователях</title>
		 <para>
			Использование встроенного хранилища предоставляет простые инструменты для хранения информации о пользователях и их группах.
		</para>
		 <para>
			Данный режим является единственным возможным режимом при работе в 2-х звенной схеме и работе по 3-х звенной схеме в варианте работы сервера приложений Platypus вне J2EE сервера, а также может быть сконфигурирован при работе Platypus в составе J2ЕЕ сервера.
		</para>
		 <para>
			В данном режиме информация о пользователях хранится в базе данных приложения в таблице <literal>MTD_USERS</literal>. Каждая запись в этой таблице соответствует одному пользователю. Сведения о группах, к которым принадлежит пользователь хранятся в таблице <literal>MTD_GROUPS</literal>. Каждому пользователю может быть сопоставлено 0 и более групп.
		</para>
		 <para>
			Таблица MTD_USERS содержит следующие обязательные поля:
		</para>
		 <informaltable>
			<textobject>
				<para>
					Параметры запуска сервера
				</para>

			</textobject>
			 <tgroup cols="2">
				<thead>
					<row>
						<entry align="center">
							Поле
						</entry>
						 <entry align="center">
							Описание
						</entry>

					</row>

				</thead>
				 <tbody>
					<row>
						<entry>
							<parameter>USR_NAME</parameter>
						</entry>
						 <entry>
							Имя пользователя
						</entry>

					</row>
					 <row>
						<entry>
							<parameter>USR_PASSWD</parameter>
						</entry>
						 <entry>
							Хэш-сумма пароля пользователя, с использованием алгоритма MD5
						</entry>

					</row>
					 <row>
						<entry>
							<parameter>USR_FORM</parameter>
						</entry>
						 <entry>
							Идентификатор формы по умолчанию, например <literal>comAppFormsWelcome</literal>
						</entry>

					</row>

				</tbody>

			</tgroup>

		</informaltable>
		 <para>
			Кроме того, таблица <literal>MTD_USERS</literal> может содержать необязательные поля, содержащие дополнительную информацию о пользователе.
		</para>
		 <para>
			Таблица <literal>MTD_GROUPS</literal> содержит следующие обязательные поля:
		</para>
		 <informaltable>
			<textobject>
				<para>
					Параметры запуска сервера
				</para>

			</textobject>
			 <tgroup cols="2">
				<thead>
					<row>
						<entry align="center">
							Поле
						</entry>
						 <entry align="center">
							Описание
						</entry>

					</row>

				</thead>
				 <tbody>
					<row>
						<entry>
							<parameter>USR_NAME</parameter>
						</entry>
						 <entry>
							Имя пользователя
						</entry>

					</row>
					 <row>
						<entry>
							<parameter>GROUP_NAME</parameter>
						</entry>
						 <entry>
							Имя группы
						</entry>

					</row>

				</tbody>

			</tgroup>

		</informaltable>

	</section>
	
	 <section>
		<title>Использование внешнего хранилища информации о пользователях</title>
		 <para>
			Данный режим дает возможность использования внешних сервисов для аутентификации пользователя, например <application>OpenLDAP</application> или <application>Microsoft Active Directory</application>.
		</para>
		 <para>
			С этим режимом аутентификации могут работать Platypus Web API клиенты, HTML5 браузерный клиент и Java SE Platypus клиент при соединении с сервлет контейнером или J2EE сервером по протоколам HTTP/HTTPS. Для использования этого режима в сервлет контейнере или в J2EE сервере должна быть настроена соответствующая область безопасности - Security Realm.
		</para>
		 <note>
			<para>
				Справочную информацию по настройке области безопасности для сервера Glassfish смотрите в приложении B: "Настройка области безопасности LDAP".
			</para>
			 <para>
				Справочную информацию по настройке области безопасности для <application>Apache Tomcat</application> смотрите в документации на сервлет-контейнер <application>Tomcat</application>.
			</para>

		</note>

	</section>

</chapter>

