[[настройка-apache-tomcat-7]]
Настройка Apache Tomcat 7
-------------------------

______________________________________________________________________________________________
*Note*

Для получения подробной информации по настройке Apache Tomcat 7
обратитесь к его документации.
______________________________________________________________________________________________

Настройка источника данных:

* cкопируйте соответствующий JAR-файл JDBC драйвера в каталог доступный
загрузчику классов: `/lib`, где CATALINA_HOME - каталог в который был
установлен Apache Tomcat;
* cоздайте JNDI ресурс источника данных JDBC; отредактируйте файл
`META-INF/context.xml` web-приложения, добавив ресурс источника данных:
+
-----------------------------------------------------------------------------------------------------------------------------------
...
<Resource name="jdbc/main" auth="Container" type="javax.sql.DataSource"
       maxActive="100" maxIdle="30" maxWait="10000"
       username="sa" password="te$tPwd" driverClassName="org.h2.Driver"     url="jdbc:h2:tcp://localhost/~/h2db/test;schema=test"/>
...
-----------------------------------------------------------------------------------------------------------------------------------
+
при необходимости настройте пул соединений, задав параметры удаления и
очистки неиспользуемых соединений.
* настройте область безопасности; отредактируйте файл
`META-INF/context.xml` web-приложения, добавив область безопасности;
пример, приведенный ниже настраивает область безопасности для работы со
встроенным хранилищем информации о пользователях:
+
--------------------------------------------------------------------------
...
<Realm  className="org.apache.catalina.realm.DataSourceRealm"
   dataSourceName="jdbc/TestDB"
   userTable="MTD_USERS" userNameCol="USR_NAME"   userCredCol="USR_PASSWD"
   userRoleTable="MTD_GROUPS" roleNameCol="GROUP_NAME" digest="MD5"/>
...
--------------------------------------------------------------------------
+
Для области безопасности DataSourceRealm задайте названия таблиц,
столбцов и алгоритма хэширования для работы с таблицами `MTD_USERS` и
`MTD_GROUPS`.
+
Для использвания другого хранилища данных аутентификации, например,
внешнего LDAP-сервера настройте соответствующий тип области
безопасности.
